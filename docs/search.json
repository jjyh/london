[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "londontime",
    "section": "",
    "text": "References:\nDashboards: Using R to create actionable science - 2Â  Dynamic: Quarto docs (tbep-tech.github.io)\nGeocoding via Python - pandas - Python generate lat/long points from address - Stack Overflow\nlibrary(crosstalk)\nlibrary(leaflet)\n\nWarning: package 'leaflet' was built under R version 4.3.3\n\nlibrary(DT)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(readxl)\nlibrary(tidyr)\nlibrary(reticulate)\n\nWarning: package 'reticulate' was built under R version 4.3.3\n.chart-wrapper {\n  overflow-x: scroll;\n}\n## import location data\ndt_loc &lt;- read_excel('data/locations.xlsx', col_names = TRUE, trim_ws=TRUE) %&gt;%  drop_na(Address)\ndt_loc$Address &lt;- paste0(dt_loc$Address, \", London, England\")\n\n#The crosstalk package can incorporate additional dynamic functionality in a Quarto document. As the name implies, it allows linking between plots and tables by including embedded Javascript in the rendered HTML file. This allows functionality that looks interactive as in a Shiny application, but does not require Shiny Server."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html#map",
    "href": "index.html#map",
    "title": "londontime",
    "section": "Map",
    "text": "Map\nCurrent legend: colour by category, dark inner dot = open late Todo\n1. add open-by-day layer control\n2. add hours by pop up\n3. Crosstalk with table\n4. layer tube station\n\ndt_loc_py&lt;-py$dt_loc_py\ndt_loc_py&lt;-dt_loc_py %&gt;% \n  rename(lng = longi)\n\n# Create a palette that maps factor levels to colors\npal &lt;- colorFactor(c(\"pink\", \"turquoise\", \"purple\",  \"green\",\"yellow\", \"orange\"), domain = c(\"Food\", \"Sight\",\"Sight, Food\", \"Shop, sight\",\"Shop\", \"Activity\"))\n\nmap&lt;-dt_loc_py %&gt;% \n  leaflet::leaflet() %&gt;%\n  leaflet::addProviderTiles(providers$OpenStreetMap)%&gt;%\n  addCircleMarkers(lng = ~lng, lat = ~lat, \n                   group = \"Saturday\",\n                   popup = ~Place,\n                   radius = 9,\n                   color = ~pal(Category),\n                   opacity = 0.7) %&gt;% \n  addLayersControl(overlayGroups = c(\"Saturday\"))\n\nWarning in pal(Category): Some values were outside the color scale and will be\ntreated as NA\n\nWarning in pal(Category): Some values were outside the color scale and will be\ntreated as NA\n\nmap %&gt;% \n  addCircles(data = subset(dt_loc_py, !is.na(Late)),\n                          lng = ~lng, lat = ~lat,\n                          popup = ~Late, \n                          radius = 3,\n                          opacity = 0.9)\n\n\n\n\n#https://rpubs.com/mattdray/basic-leaflet-maps\n\n  # leaflet::addLayersControl(\n  #   overlayGroups = c(\"Outstanding\", \"Good\", \"Other\"),  # add these layers\n  #   options = layersControlOptions(collapsed = FALSE)  # expand on hover?\n  # ) %&gt;% \n  # hideGroup(c(\"Good\", \"Other\"))  # turn these off by default\n  #  \n  #leaflet::addAwesomeMarkers\n\n\n# create shared data\nsd &lt;- SharedData$new(tbwqdat)\n\n# create a filter input\nfilter_slider(\"chla\", \"Chlorophyll-a\", sd, column=~chla, step=0.1, width=250)\n\n# use shared data with crosstalk widgets\nbscols(\n  leaflet(sd) %&gt;% \n    addTiles() %&gt;% \n    addMarkers(),\n  datatable(\n    sd, extensions = \"Scroller\", style=\"bootstrap\", class = \"compact\", width = \"100%\", rownames = F,\n    options =list(\n      scrollY = 300, scroller = TRUE, \n      columnDefs = list(\n        list(visible = F, targets = c(0:1, 4)),\n         list(className = 'dt-left', targets = '_all'))\n      ),\n      colnames = c('lat', 'lon', 'Bay segment', 'Station', 'mo', 'Chl-a (ug/L)')\n    )\n  )"
  }
]